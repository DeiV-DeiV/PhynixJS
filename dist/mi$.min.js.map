{"version":3,"file":"mi$.min.js","sources":["../src/ajax.js","../src/effects.js","../src/dom.js","../src/core.js","../src/index.js"],"sourcesContent":["//ajax.js\r\n\r\nexport async function get(template) {\r\n  if (!template || typeof template !== \"string\") {\r\n    console.error(\"❌ mi$.html(): Ruta inválida.\");\r\n    return this;\r\n  }\r\n  try {\r\n    const res = await fetch(`./components${template}.html`);\r\n    if (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n    const html = await res.text();\r\n    this._forEach((el) => (el.innerHTML += html));\r\n  } catch (error) {\r\n    console.error(\"❌ mi$.html(): Falló la carga del componente:\", error);\r\n  }\r\n  return this;\r\n}\r\n\r\nexport async function post(template, body = {}) {\r\n  if (!template || typeof template !== \"string\") {\r\n    console.error(\"❌ mi$.html(): Ruta inválida.\");\r\n    return this;\r\n  }\r\n\r\n  try {\r\n    const opts = Object.freeze({\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(body),\r\n    });\r\n\r\n    const res = await fetch(`./components${template}.html`, opts);\r\n    if (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n    const html = await res.text();\r\n    this._forEach((el) => (el.innerHTML += html));\r\n  } catch (error) {\r\n    console.error(\"❌ mi$.html(): Falló la carga del componente:\", error);\r\n  }\r\n  return this;\r\n}\r\n","// effects.js\r\n\r\nexport function drag() {\r\n  for (let el of this) {\r\n    el.style.cursor = \"grab\";\r\n    // el.style.position = \"relative\";\r\n    let isDraggable = false;\r\n    let offsetX = 0,\r\n      offsetY = 0;\r\n    let currentX = 0,\r\n      currentY = 0;\r\n\r\n    const UpdatePos = () => {\r\n      el.style.transform = `translate(${currentX}px, ${currentY}px)`;\r\n    };\r\n\r\n    const onMouseDown = function (e) {\r\n      isDraggable = true;\r\n      offsetX = e.clientX - currentX;\r\n      offsetY = e.clientY - currentY;\r\n      el.style.cursor = \"grabbing\";\r\n      e.preventDefault();\r\n    };\r\n    const onMouseMove = function (e) {\r\n      if (!isDraggable) return;\r\n      currentX = e.clientX - offsetX;\r\n      currentY = e.clientY - offsetY;\r\n      UpdatePos();\r\n    };\r\n    const onMouseUp = function () {\r\n      isDraggable = false;\r\n      el.style.cursor = \"grab\";\r\n    };\r\n\r\n    el.addEventListener(\"mousedown\", onMouseDown);\r\n    window.addEventListener(\"mousemove\", onMouseMove);\r\n    window.addEventListener(\"mouseup\", onMouseUp);\r\n  }\r\n\r\n  return this;\r\n}\r\n","// dom.js\r\n\r\nimport * as ayax from \"./ajax.js\";\r\nimport { mi$ } from \"./core.js\";\r\n\r\nimport * as effects from \"./effects.js\";\r\n\r\nexport const metodos = Object.freeze({\r\n  _forEach(callback) {\r\n    for (let i = 0; i < this.length; i++) {\r\n      callback(this[i], i);\r\n    }\r\n    return this;\r\n  },\r\n\r\n  on(ev, callback) {\r\n    for (let el of this) el.addEventListener(ev, callback.call(mi$(el)));\r\n    return this;\r\n  },\r\n\r\n  off(ev, callback) {\r\n    for (let el of this) el.removeEventListener(ev, callback);\r\n    return this;\r\n  },\r\n\r\n  css(style = {}) {\r\n    this._forEach((el) => {\r\n      for (let [prop, val] of Object.entries(style)) el.style[prop] = val;\r\n    });\r\n    return this;\r\n  },\r\n\r\n  html(html) {\r\n    for (let el of this) el.innerHTML = html;\r\n    return this;\r\n  },\r\n\r\n  animate(animate) {\r\n    this._forEach((el) => requestAnimationFrame(() => animate(el)));\r\n    return this;\r\n  },\r\n\r\n  addClass(classname) {\r\n    this._forEach((el) => el.classList.add(classname));\r\n    return this;\r\n  },\r\n\r\n  removeClass(classname) {\r\n    for (let el of this) el.classList.remove(classname);\r\n\r\n    return this;\r\n  },\r\n\r\n  toggleClass(classname) {\r\n    const clase = classname.trim().split(/\\s+/);\r\n    this._forEach((el) => {\r\n      for (let cls of clase) el.classList.toggle(cls);\r\n    });\r\n    return this;\r\n  },\r\n\r\n  hide(){\r\n    this._forEach(el=>{el.style.display = 'none'})\r\n    return this\r\n  },\r\n\r\n  ...ayax,\r\n  ...effects,\r\n});\r\n","// core.js\r\n// consume menos memoria, mi punto es ese\r\n\r\nimport { metodos } from \"./dom.js\";\r\n\r\nconst DEBUG = false;\r\nconst x = (...args) => DEBUG && console.log(...args);\r\n\r\nconst DEV_MODO = true; // usar FALSE para produccion\r\n\r\nconst aplicarMetodos = (el) => {\r\n  // evita usar proxy\r\n  for (const nameMetodo of Object.keys(metodos)) {\r\n    Object.defineProperty(el, nameMetodo, {\r\n      value: metodos[nameMetodo],\r\n      writable: false,\r\n      configurable: false,\r\n      enumerable: false,\r\n    });\r\n  }\r\n\r\n  // Evita agregar nuevas propiedades\r\n  return el;\r\n  // return Object.freeze(nodoArray);\r\n  // Object.freeze(Persona.prototype);\r\n};\r\n\r\nconst usarProxyProtegido = (el) => {\r\n  return new Proxy(el, {\r\n    get(target, prop) {\r\n      if (prop in target) return target[prop];\r\n      if (prop in metodos) {\r\n        const fn = metodos[prop];\r\n        Object.defineProperty(target, prop, {\r\n          value: fn,\r\n          writable: false,\r\n          configurable: false,\r\n          enumerable: false,\r\n        });\r\n\r\n        return fn;\r\n      }\r\n\r\n      return undefined;\r\n    },\r\n\r\n    set(target, prop, value) {\r\n      if (prop in metodos)\r\n        throw new Error(`No puedes sobreescribir el metodo .${prop}`);\r\n      target[prop] = value;\r\n      return true;\r\n    },\r\n  });\r\n};\r\n\r\nexport const mi$ = (selector) => {\r\n  if (typeof selector === \"function\") {\r\n    document.addEventListener(\"DOMContentLoaded\", selector);\r\n    return;\r\n  }\r\n\r\n  if (typeof selector === \"string\") {\r\n    const elements = Array.from(document.querySelectorAll(selector));\r\n\r\n    return DEV_MODO ? usarProxyProtegido(elements) : aplicarMetodos(elements);\r\n  }\r\n  \r\n  // Si es un nodo DOM individual\r\n  if (selector instanceof Element) {\r\n    const elements = [selector];\r\n    return DEV_MODO ? usarProxyProtegido(elements) : aplicarMetodos(elements);\r\n  }\r\n\r\n  return [];\r\n};\r\n\r\nconst modsMap = {\r\n  ctrl: \"ctrlKey\",\r\n  alt: \"altKey\",\r\n  shift: \"shiftKey\",\r\n  meta: \"metaKey\",\r\n};\r\n\r\nexport const $keydown = ({ selector, keypress, handle }) => {\r\n  const element = mi$(selector);\r\n  const [modKey, keyChar] = keypress.toLowerCase().split(\"+\");\r\n  const modKeyProp = modsMap[modKey];\r\n\r\n  document.addEventListener(\"keydown\", (e) => {\r\n    const matchKey = e[modKeyProp] && e.key.toLowerCase() === keyChar;\r\n\r\n    if (matchKey) {\r\n      element._forEach((el) => handle.call(mi$(el)));\r\n    }\r\n  });\r\n};\r\n","// index.js\r\nimport {mi$, $keydown} from \"./core.js\";\r\n\r\nexport const $ = (selector) => mi$(selector);\r\nexport const keydown = ({ selector, keypress, handle }) => $keydown({ selector, keypress, handle });\r\n\r\nwindow.$ = (selector) => mi$(selector)\r\nwindow.keydown = ({ selector, keypress, handle }) => $keydown({ selector, keypress, handle })\r\n"],"names":["async","template","console","error","this","res","fetch","ok","Error","status","html","text","_forEach","el","innerHTML","body","opts","Object","freeze","method","headers","JSON","stringify","style","cursor","isDraggable","offsetX","offsetY","currentX","currentY","UpdatePos","transform","onMouseDown","e","clientX","clientY","preventDefault","onMouseMove","onMouseUp","addEventListener","window","metodos","callback","i","length","on","ev","call","mi$","off","removeEventListener","css","prop","val","entries","animate","requestAnimationFrame","addClass","classname","classList","add","removeClass","remove","toggleClass","clase","trim","split","cls","toggle","hide","display","ayax","effects","usarProxyProtegido","Proxy","get","target","fn","defineProperty","value","writable","configurable","enumerable","set","selector","elements","Array","from","document","querySelectorAll","Element","modsMap","ctrl","alt","shift","meta","$keydown","keypress","handle","element","modKey","keyChar","toLowerCase","modKeyProp","key","$","keydown"],"mappings":"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"}