{"version":3,"file":"mi$.js","sources":["../src/ajax.js","../src/dom.js","../src/core.js","../src/index.js"],"sourcesContent":["//ajax.js\r\n\r\nexport async function get(template) {\r\n  if (!template || typeof template !== \"string\") {\r\n    console.error(\"❌ mi$.html(): Ruta inválida.\");\r\n    return this;\r\n  }\r\n  try {\r\n    const res = await fetch(`./components${template}.html`);\r\n    if (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n    const html = await res.text();\r\n    this._forEach((el) => (el.innerHTML += html));\r\n  } catch (error) {\r\n    console.error(\"❌ mi$.html(): Falló la carga del componente:\", error);\r\n  }\r\n  return this;\r\n}\r\n\r\nexport async function post(template, body = {}) {\r\n  if (!template || typeof template !== \"string\") {\r\n    console.error(\"❌ mi$.html(): Ruta inválida.\");\r\n    return this;\r\n  }\r\n\r\n  try {\r\n    const opts = Object.freeze({\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(body),\r\n    });\r\n\r\n    const res = await fetch(`./components${template}.html`, opts);\r\n    if (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n    const html = await res.text();\r\n    this._forEach((el) => (el.innerHTML += html));\r\n  } catch (error) {\r\n    console.error(\"❌ mi$.html(): Falló la carga del componente:\", error);\r\n  }\r\n  return this;\r\n}\r\n","// dom.js\r\n\r\nimport { get, post } from \"./ajax\";\r\n\r\nexport const metodos = Object.freeze({\r\n  _forEach(callback) {\r\n    for (let i = 0; i < this.length; i++) {\r\n      callback(this[i], i);\r\n    }\r\n    return this;\r\n  },\r\n\r\n  on(ev, callback) {\r\n    this._forEach((ele) => ele.addEventListener(ev, callback));\r\n    return this;\r\n  },\r\n\r\n  off(ev,callback){\r\n    this._forEach(el=>el.removeEventListener(ev,callback))\r\n    return this\r\n  },\r\n\r\n  css(style) {\r\n    this._forEach((ele) => Object.assign(ele.style, style));\r\n    return this;\r\n  },\r\n  html(html){\r\n    this._forEach(el => el.innerHTML = html)  \r\n    return this\r\n  },\r\n\r\n  animate(animate = {}){\r\n    this._forEach(el=>el)\r\n  },\r\n\r\n  get,\r\n  post,\r\n});\r\n","// core.js\r\n// consume menos memoria, mi punto es ese\r\n\r\nimport { metodos } from \"./dom.js\";\r\n\r\nconst DEBUG = false;\r\nconst x = (...args) => DEBUG && console.log(...args);\r\n\r\nconst DEV_MODO = false; // usar FALSE para produccion\r\n\r\nconst aplicarMetodos = (nodoArray) => {\r\n  // evita usar proxy\r\n  for (const nameMetodo of Object.keys(metodos)) {\r\n    Object.defineProperty(nodoArray, nameMetodo, {\r\n      value: metodos[nameMetodo],\r\n      writable: false,\r\n      configurable: false,\r\n      enumerable: false,\r\n    });\r\n  }\r\n\r\n  // Previene agregar nuevas propiedades\r\n  return Object.freeze(nodoArray);\r\n  // Object.freeze(Persona.prototype);\r\n};\r\n\r\nconst crearProxyProtegido = (nodoArray) => {\r\n  return new Proxy(nodoArray, {\r\n    get(target, prop) {\r\n      if (prop in target) return target[prop];\r\n      if (prop in metodos) {\r\n        const fn = metodos[prop];\r\n        Object.defineProperty(target, prop, {\r\n          value: fn,\r\n          writable: false,\r\n          configurable: false,\r\n          enumerable: false,\r\n        });\r\n\r\n        return fn;\r\n      }\r\n\r\n      return undefined;\r\n    },\r\n\r\n    set(target, prop, value) {\r\n      if (prop in metodos)\r\n        throw new Error(`No puedes sobreescribir el metodo ${prop}`);\r\n      target[prop] = value;\r\n      return true;\r\n    },\r\n  });\r\n};\r\n\r\nexport const mi$ = (selector) => {\r\n  if (typeof selector === \"function\") {\r\n    document.addEventListener(\"DOMContentLoaded\", selector);\r\n    return;\r\n  }\r\n\r\n  if (typeof selector === \"string\") {\r\n    const elements = Array.from(document.querySelectorAll(selector));\r\n\r\n    return DEV_MODO\r\n      ? crearProxyProtegido(elements)\r\n      : aplicarMetodos(elements);\r\n  }\r\n\r\n  return [];\r\n};\r\n","// index.js\r\nimport { mi$ } from \"./core.js\";\r\n\r\nexport const $ = (selector) => mi$(selector);\r\nwindow.$ = (selector) => mi$(selector)\r\n"],"names":[],"mappings":"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"}