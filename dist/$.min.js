var $=function(t){"use strict";function path(path){return path.startsWith("./")||path.startsWith("/")||path.startsWith("http")?path:`./components/${path}`}function Component({selector:t="body",method:e="GET",template:n="",style:o="",script:r="",data:s="",limit:i=15}){return function(){try{const a=$(t);a.html(n,{method:e,data:s,limit:i}),a.css(o),a.js(r)}catch(t){console.log("Error Component:",t)}}}window.Component=Component;const e={attrs:["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","onmouseenter","onmouseleave","onkeydown","onkeypress","onkeyup","onfocus","onblur","onchange","onsubmit","onreset","oninput","onselect","onload","onunload","onresize","onscroll","onerror","onhashchange","onpopstate","onbeforeunload","onabort","oncanplay","oncanplaythrough","ondurationchange","onemptied","onended","onerror","onloadeddata","onloadedmetadata","onpause","onplay","onplaying","onprogress","onratechange","onseeked","onseeking","onstalled","onsuspend","ontimeupdate","onvolumechange","onwaiting","ontouchstart","ontouchend","ontouchmove","ontouchcancel","ongesturestart","ongesturechange","ongestureend","onpointerdown","onpointerup","onpointermove","onpointerover","onpointerout","onpointerenter","onpointerleave","onpointercancel","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","oncopy","oncut","onpaste","onerror","onanimationstart","onanimationend","onanimationiteration","ontransitionend"],tags:["script","iframe","object","embed","applet","link","meta","base","form","frame","frameset","svg","math","style"]},n=Object.freeze({html:{fn:t=>{const n=(new DOMParser).parseFromString(t,"text/html");for(const t of n.querySelectorAll("*")){if(e.tags.includes(t.tagName.toLowerCase()))return!1;for(const n of t.attributes)if(e.attrs.includes(n.name.toLowerCase()))return!1}return!0},msg:"HTML invalido"},node:{fn:t=>Array.isArray(t)?t.every(t=>t instanceof Node):t instanceof Node,msg:"No es un Node"},string:{fn:t=>Array.isArray(t)?t.every(t=>"string"==typeof t&&t.trim().length>0):"string"==typeof t&&t.trim().length>0,msg:"No es un string valido"},callback:{fn:t=>"function"==typeof t,msg:"Debe ser una funcion"},object:{fn:t=>Array.isArray(t)?t.every(t=>"object"==typeof t&&null!==t):"object"==typeof t&&null!==t,msg:"Solo acepto objeto"},array:{fn:t=>Array.isArray(t),msg:"Esperando un arreglo"},number:{fn:t=>Array.isArray(t)?t.every(t=>"number"==typeof t):"number"==typeof t,msg:"Esperando un numero"},email:{fn:t=>{Array.isArray(t)?t.every(t=>t.includes("@gmail.com")):t.split("@gmail.com")},msg:"Email invalido"},password:{fn:t=>{},msg:"Password invalido"}}),o={Diffing:[],Login:[],Singin:[],Component:[]},Validate=(t=null,e={})=>{const r=new WeakSet;return function s(){if(r.has(e))return;r.add(e),o[t]=[];const i=Object.entries(e);for(let e=0;e<i.length;e++){const[r,a]=i[e],c=Object.freeze(n[r]);if(!c)throw new Error(`Key ${r} no existe..!!`);const{fn:l,msg:u}=c;l(a)||o[t].push({msg:u,value:a}),n.object.fn(a)&&s()}if(o[t].length>0){const e=document.querySelector(".validate");e&&e.remove(),Component({template:'\n             <div class="validate glass">\n      <ul class="formValidate">\n          <h1>Error Validate:</h1>\n          \n          \n      </ul>\n    </div>\n            ',style:"validate/validate.css"})(),Component({selector:".formValidate",template:"<li>{{msg}}: {{value}}</li>",data:o[t]})()}}()};window.Validate=Validate;const r=new WeakMap;function s(path,t){let e=t;for(const t of path.split("."))if(e=e?.[t],null==e)break;return e??""}function i(t){if(Array.isArray(t))return t;for(const e in t)if(Array.isArray(t[e]))return t[e];return[t]}function Diffing(t,e){if(t===e)return;if(t.nodeType!==e.nodeType||t.nodeName!==e.nodeName)return void t.replaceWith(e.cloneNode(!0));if(t.nodeType===Node.TEXT_NODE)return void(t.textContent!==e.textContent&&(t.textContent=e.textContent));const n=[...t.attributes],o=[...e.attributes];for(const e of o)t.getAttribute(e.name)!==e.value&&t.setAttribute(e.name,e.value);for(const o of n)e.hasAttribute(o.name)||t.removeAttribute(o.name);const r=[...t.childNodes],s=[...e.childNodes],i=Math.max(r.length,s.length);for(let e=0;e<i;e++)!r[e]&&s[e]?t.appendChild(s[e].cloneNode(!0)):r[e]&&!s[e]?r[e].remove():r[e]&&s[e]&&Diffing(r[e],s[e])}const a=Object.freeze({_forEach:function(t){for(let e=0;e<this.length;e++)t(this[e],e);return this},off(t,e){for(let n of this)n.removeEventListener(t,e);return this},toggleClass:function(t){Validate("toggleClass",{string:t});const e=t.trim().split(/\s+/);return this._forEach(t=>{for(let n of e)t.classList.toggle(n)}),this},append:function(t){for(const e of this)e.insertAdjacentHTML("beforeend",t);return this},drag:function(){for(let t of this){if(r.has(t))continue;const e={isDraggable:!1,offsetX:0,offsetY:0,currentX:0,currentY:0};r.set(t,e),t.style.cursor="grab";const n=function(n){e.isDraggable&&(e.currentX=n.clientX-e.offsetX,e.currentY=n.clientY-e.offsetY,t.style.transform=`translate(${e.currentX}px, ${e.currentY}px)`)},o=function(){e.isDraggable=!1,t.style.cursor="grab",t.classList.toggle("select",!1),window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",o)},s=function(r){e.isDraggable=!0,e.offsetX=r.clientX-e.currentX,e.offsetY=r.clientY-e.currentY,t.style.cursor="grabbing",t.classList.toggle("select",!0),r.preventDefault(),window.addEventListener("mousemove",n),window.addEventListener("mouseup",o,{once:!0})};t.addEventListener("mousedown",s)}return this},on:function(t,e){const n=this;return document.body.addEventListener(t,function(t){for(const o of n){const n=t.target.closest(o.tagName);n&&e.call(n,t)}}),this},get:async function(t){try{const e=await fetch(`./components${t}.html`);if(!e.ok)throw new Error(`HTTP ${e.status}`);const n=await e.text();this._forEach(t=>t.innerHTML+=n)}catch(t){console.error("$.html(): Falló la carga del componente:",t)}return this},post:async function(t,e={}){try{const n=Object.freeze({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),o=await fetch(`./components${t}.html`,n);if(!o.ok)throw new Error(`HTTP ${o.status}`);const r=await o.text();this._forEach(t=>t.innerHTML+=r)}catch(t){console.error("$.html(): Falló la carga del componente:",t)}return this},html:function(t,{method:e="GET",data:n=null,limit:o=15}={}){if(0==t.trim().length)for(const t of this)return t.innerHTML;return(async()=>{try{const r=t.endsWith(".html")?await(await fetch(path(t))).text():t,a=i("string"==typeof n&&n.endsWith(".json")?await(await fetch(n,{method:e})).json():n),c=o?a.slice(0,o):a,l=r.split(/{{\s*(.*?)\s*}}/g);let u="";for(const t of c)for(let e=0;e<l.length;e++)u+=e%2==0?l[e]:s(l[e],t);Validate("html",{html:u});for(const t of this)o<=15?t.insertAdjacentHTML("beforeend",u):Diffing(t,u);return this}catch(t){console.error("Error al cargar metodo .html :",t)}})()},load:function(t,{method:e="GET",data:n=null,limit:o=15}={}){if(0==t.trim().length)for(const t of this)return t.innerHTML;return(async()=>{try{const r=t.endsWith(".html")?await(await fetch(path(t))).text():t,a=i("string"==typeof n&&n.endsWith(".json")?await(await fetch(n,{method:e})).json():n),c=o?a.slice(0,o):a,l=r.split(/{{\s*(.*?)\s*}}/g);let u="";for(const t of c)for(let e=0;e<l.length;e++)u+=e%2==0?l[e]:s(l[e],t);Validate("load",{html:u});for(const t of this)o<=15?t.insertAdjacentHTML("beforeend",u):Diffing(t,u);return this}catch(t){console.error("Error al cargar metodo .html :",t)}})()},css:function(t){if("string"==typeof t&&t.endsWith(".css")){const e=path(t);if(!document.querySelector(`link[href="${e}"]`)){const t=document.createElement("link");t.rel="stylesheet",t.href=e,document.head.appendChild(t)}}if("object"==typeof t&&null!==t)for(const e of this)for(let[n,o]of Object.entries(t))e.style[n]=o;return this},js:function(t){if("string"==typeof t&&t.endsWith(".js")){const e=path(t);if(!document.querySelector(`script[src="${e}"]`)){const t=document.createElement("script");t.src=e,t.type="module",document.body.appendChild(t)}}return this},animate(t){for(let e of this)requestAnimationFrame(()=>t(e));return this},addClass(t){for(let e of this)e.classList.add(t);return this},removeClass(t){for(let e of this)e.classList.remove(t);return this},containsClass(t){for(let e of this)if(e.classList.contains(t))return!0;return this},hide(){for(let t of this)t.style.display="none";return this},show(){for(let t of this)t.style.display="";return this},val(t){t||el.val;for(let e of this)e.value=t;return this}});function c(t){for(const e of Object.keys(a))Object.defineProperty(t,e,{value:a[e],writable:!1,configurable:!1,enumerable:!1});return t}function l(t){throw new Error(`Elemento Invalido --\x3e ${t} <--`)}function $$(t){if("function"==typeof t)return void document.addEventListener("DOMContentLoaded",t);const e="string"==typeof t?document.querySelectorAll(t):t instanceof Element||t instanceof NodeList||Array.isArray(t)?t:l(t);return e.length||l(t),c(e)}function $(t){if("function"==typeof t)return void("loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t());return c(["string"==typeof t?document.querySelector(t):t instanceof Element?t:l(t)])}window.$$=$$,window.$=$;const u=new Set,f={};function On(t,e={}){Validate("On",{object:e});const n=f[t]||={};for(const o in e)o in n?console.warn(`El selector ${o} ya fue registrado en el evento ${t}`):n[o]=e[o];u.has(t)||(document.body.addEventListener(t,function(t){for(const[e,o]of Object.entries(n)){const n=t.target.closest(e);n&&o.call(n,t)}}),u.add(t))}function Drag(t={}){On("mousedown",function(e){for(const[n,o]of Object.entries(t)){const t=e.target.closest(n);if(t){const n=e.target.closest(o);if(!t||!n)return;let r=e.clientX-n.getBoundingClientRect().left,s=e.clientY-n.getBoundingClientRect().top;n.style.cursor="grabbing",n.classList.toggle("select");const i=e=>{const o=t.getBoundingClientRect(),i=n.getBoundingClientRect();let a=e.clientX-o.left-r,c=e.clientY-o.top-s;const l=Math.max(0,Math.min(a,o.width-i.width)),u=Math.max(0,Math.min(c,o.height-i.height));n.style.transform=`translate(${l}px, ${u}px)`},a=t=>{n.style.cursor="grab",n.classList.toggle("select"),document.body.removeEventListener("mousemove",i),document.body.removeEventListener("mouseup",a)};document.body.addEventListener("mousemove",i),document.body.addEventListener("mouseup",a)}}})}function d(t={},{ext:e=["png","jpg","jpeg"]}={}){const n=e.map(t=>t.toLowerCase());On("dragstart",t=>{t.target}),On("dragover",t=>{t.preventDefault()}),On("dragenter",t=>{console.log("drag enter");t.target&&t.preventDefault()}),On("drop",function(o){o.preventDefault();if([...o.dataTransfer.files].filter(t=>{const e=t.name.split(".").pop().toLowerCase();return!n.includes(e)}).length>0)return console.error(`Extensiones permitidas: --\x3e ${e.join(" ")} <--`);for(const[e,n]of Object.entries(t)){const t=o.target.closest(e);t&&n.call(t,o)}})}window.On=On,window.Drag=Drag,window.Drop=d;const m=Object.freeze({ctrl:"ctrlKey",alt:"altKey",shift:"shiftKey",meta:"metaKey"});function h(t={}){On("keydown",function(e){for(const[n,o]of Object.entries(t)){const t=n.toLowerCase().split("+");if(t.length<2||t.length>4)continue;const r=t.pop(),s=t.every(t=>m[t]&&e[m[t]]),i=e.key.toLowerCase()===r;s&&i&&o.call(e.target,e)}})}window.Shortcut=h;const Click=(t={})=>On("click",t);window.Click=Click;const Input=(t={})=>On("input",t);function p(t){return Object.freeze({status:t.status,statusText:t.statusText,ok:t.ok,timestamp:Date.now(),contentType:t.headers.get("content-type")})}window.Input=Input;const g={GET:()=>({method:"GET",headers:{"Content-Type":"application/json"}}),POST:t=>({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),PUT:t=>({method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),DELETE:t=>({method:"DELETE",headers:{"Content-Type":"application/json"}})};async function y(t,path,e,n){try{const o=await fetch(path,g[t.toUpperCase()](e)),r=o.headers.get("content-type");if(!o.ok)return function(t){Component({template:"/error/404.html",style:"/error/404.css",data:p(t)})}(o);if(!r.includes("application/json"))throw new Error(`Solo acepta JSON. Recibido: ${r}`);const s=await o.json();return n?n(s):s}catch(t){console.log("Error request:",t)}}const w=Object.freeze({get:(path,t)=>y("GET",path,null,t),post:(path,t,e)=>y("POST",path,t,e),put:(path,t,e)=>y("PUT",path,t,e),delete:(path,t)=>y("DELETE",path,null,t)});return window.ajax=w,t.$$=$$,t.Click=Click,t.Component=Component,t.Drag=Drag,t.Drop=d,t.Input=Input,t.On=On,t.Shortcut=h,t.Validate=Validate,t.ajax=w,t.default=$,Object.defineProperty(t,"__esModule",{value:!0}),t}({});
//# sourceMappingURL=$.min.js.map
