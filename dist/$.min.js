var $=function(){"use strict";const t=Object.freeze({node:{fn:t=>Array.isArray(t)?t.some(t=>!(t instanceof Node)):!(t instanceof Node),msg:"No es un Node"},string:{fn:t=>Array.isArray(t)?t.some(t=>"string"!=typeof t||!t.trim()):"string"!=typeof t||!t.trim(),msg:"No es un string válido"},callback:{fn:t=>"function"!=typeof t||null===t,msg:"Debe ser una función"},object:{fn:t=>"object"!=typeof t||null===t,msg:"Solo acepto objeto"},array:{fn:t=>!Array.isArray(t),msg:"Esperando un arreglo"},number:{fn:t=>"number"!=typeof t,msg:"Esperando un número"}});function e(e={}){for(const[n,{fn:o,msg:r}]of Object.entries(t)){const t=e[n];if(n in e&&o(t)){const e=Array.isArray(t)?`${r} :\n [${t.map((t,e)=>o(t)?`${JSON.stringify(t)}`:`${t}`).join(", ")}]`:`${r}: ${t}`;console.log(e)}}}function Diffing(t,e){if(t&&!e)return t.remove();if(t.nodeType!==e.nodeType||t.nodeName!==e.nodeName)return void t.replaceWith(e.cloneNode(!0));if(t.nodeType===Node.TEXT_NODE)return void(t.textContent!==e.textContent&&(t.textContent=e.textContent));const n=[...t.attributes],o=[...e.attributes];for(const e of o)t.getAttribute(e.name)!==e.value&&t.setAttribute(e.name,e.value);for(const o of n)e.hasAttribute(o.name)||t.removeAttribute(o.name);const r=[...t.childNodes],s=[...e.childNodes],i=Math.max(r.length,s.length);for(let e=0;e<i;e++)!r[e]&&s[e]?t.appendChild(s[e].cloneNode(!0)):r[e]&&!s[e]?(r[e].remove(),e--):r[e]&&s[e]&&Diffing(r[e],s[e])}window.Validate=e;const n=new Set;function o(t){throw new Error(`Elemento Invalido --\x3e ${t} <--`)}window.Component=function({selector:t="body",method:o="GET",template:r,script:s,style:i,data:c={}},{once:a=!0}={}){return e({string:[t,o,r,s,i],object:c}),async function(){if(a&&n.has(r))return console.warn(`Componente cargado en el ${t}...`);const e=document.querySelector(t);if(!e)return console.warn(`--\x3e ${t} <-- no existe en el documento...`);try{const t={method:o},l=await fetch(`./components/${r}`,t),f=(await l.text()).replace(/{{(.*?)}}/g,(t,e)=>c[e.trim()]??"");if(Diffing(e,(new DOMParser).parseFromString(f,"text/html").body),a&&n.add(r),i&&!document.querySelector(`link[href="./components/${i}"]`)){const t=document.createElement("link");t.rel="stylesheet",t.href=`./components/${i}`,document.head.appendChild(t)}if(s&&!document.querySelector(`script[src="./components/${s}"]`)){const t=document.createElement("script");t.src=`./components/${s}`,t.type="module",document.body.appendChild(t)}}catch(t){const n=await fetch("./components/error/error.html"),o=await n.text();Diffing(e,(new DOMParser).parseFromString(o,"text/html").body)}}};const r=new WeakMap;const s=Object.freeze({_forEach:function(t){for(let e=0;e<this.length;e++)t(this[e],e);return this},off(t,e){for(let n of this)n.removeEventListener(t,e);return this},toggleClass:function(t){e({string:t});const n=t.trim().split(/\s+/);return this._forEach(t=>{for(let e of n)t.classList.toggle(e)}),this},css:function(t={}){return e({object:t}),this._forEach(e=>{for(let[n,o]of Object.entries(t))e.style[n]=o}),this},append:function(t){e({string:t});for(const e of this)e.insertAdjacentHTML("beforeend",t);return this},drag:function(){for(let t of this){if(r.has(t))continue;const e={isDraggable:!1,offsetX:0,offsetY:0,currentX:0,currentY:0};r.set(t,e),t.style.cursor="grab";const n=function(n){e.isDraggable&&(e.currentX=n.clientX-e.offsetX,e.currentY=n.clientY-e.offsetY,t.style.transform=`translate(${e.currentX}px, ${e.currentY}px)`)},o=function(){e.isDraggable=!1,t.style.cursor="grab",t.classList.toggle("select",!1),window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",o)},s=function(r){e.isDraggable=!0,e.offsetX=r.clientX-e.currentX,e.offsetY=r.clientY-e.currentY,t.style.cursor="grabbing",t.classList.toggle("select",!0),r.preventDefault(),window.addEventListener("mousemove",n),window.addEventListener("mouseup",o,{once:!0})};t.addEventListener("mousedown",s)}return this},on:function(t,e){for(const n of this)n.addEventListener(t,e);return this},get:async function(t){if(!t||"string"!=typeof t)return console.error(" $.html(): Ruta inválida."),this;try{const e=await fetch(`./components${t}.html`);if(!e.ok)throw new Error(`HTTP ${e.status}`);const n=await e.text();this._forEach(t=>t.innerHTML+=n)}catch(t){console.error("$.html(): Falló la carga del componente:",t)}return this},post:async function(t,e={}){if(!t||"string"!=typeof t)return console.error("$.html(): Ruta inválida."),this;try{const n=Object.freeze({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),o=await fetch(`./components${t}.html`,n);if(!o.ok)throw new Error(`HTTP ${o.status}`);const r=await o.text();this._forEach(t=>t.innerHTML+=r)}catch(t){console.error("$.html(): Falló la carga del componente:",t)}return this},html(t){for(let e of this)e.innerHTML=t;return this},animate(t){for(let e of this)requestAnimationFrame(()=>t(e));return this},addClass(t){for(let e of this)e.classList.add(t);return this},removeClass(t){for(let e of this)e.classList.remove(t);return this},containsClass(t){for(let e of this)if(e.classList.contains(t))return!0;return this},hide(){for(let t of this)t.style.display="none";return this},val(){for(let t of this)t.value;return this}});function i(t){for(const e of Object.keys(s))Object.defineProperty(t,e,{value:s[e],writable:!1,configurable:!1,enumerable:!1});return t}const c=new Set,a={};function On(t,n){e({string:t,object:n});const o=a[t]||={};Object.assign(o,n),c.has(t)||(c.add(t),document.body.addEventListener(t,function(t){for(const[e,n]of Object.entries(o)){const o=t.target.closest(e);o&&n.call(o,t)}}))}function $(t){if("function"==typeof t)return void("loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t());const e="string"==typeof t?[document.querySelector(t)]:t instanceof Element?[t]:o(t);return e.length||o(t),i(e)}window.On=On,console.log("Mapeo de Eventos: \n",a),window.$$=function(t){if("function"==typeof t)return void document.addEventListener("DOMContentLoaded",t);const e="string"==typeof t?[...document.querySelectorAll(t)]:t instanceof Element?[t]:t instanceof NodeList||Array.isArray(t)?[...t]:o(t);return e.length||o(t),i(e)},window.$=$;window.Click=(t={})=>On("click",t);return window.Input=(t={})=>On("input",t),window.x=function(...t){return console.log(...t)},window.Drag=function(t={}){On("mousedown",function(e){for(const[n,o]of Object.entries(t)){const t=e.target.closest(n);if(t){const n=e.target.closest(o);if(!t||!n)return;let r=e.clientX-n.getBoundingClientRect().left,s=e.clientY-n.getBoundingClientRect().top;n.style.cursor="grabbing",n.classList.toggle("select");const i=e=>{const o=t.getBoundingClientRect(),i=n.getBoundingClientRect();let c=e.clientX-o.left-r,a=e.clientY-o.top-s;const l=Math.max(0,Math.min(c,o.width-i.width)),f=Math.max(0,Math.min(a,o.height-i.height));n.style.transform=`translate(${l}px, ${f}px)`},c=t=>{n.style.cursor="grab",n.classList.toggle("select"),document.body.removeEventListener("mousemove",i),document.body.removeEventListener("mouseup",c)};document.body.addEventListener("mousemove",i),document.body.addEventListener("mouseup",c)}}})},window.Drop=function(t={},{ext:e=["png","jpg","jpeg"]}={}){const n=e.map(t=>t.toLowerCase());On("dragstart",t=>{t.target}),On("dragover",t=>{t.preventDefault()}),On("dragenter",t=>{console.log("drag enter");t.target&&t.preventDefault()}),On("drop",function(o){o.preventDefault();if([...o.dataTransfer.files].filter(t=>{const e=t.name.split(".").pop().toLowerCase();return!n.includes(e)}).length>0)return console.error(`Extensiones permitidas: --\x3e ${e.join(" ")} <--`);for(const[e,n]of Object.entries(t)){const t=o.target.closest(e);t&&n.call(t,o)}})},$}();
//# sourceMappingURL=$.min.js.map
