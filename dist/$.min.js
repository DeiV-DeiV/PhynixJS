var $=function(e){"use strict";function Diffing(e,t){if(e===t)return;if(e.nodeType!==t.nodeType||e.nodeName!==t.nodeName)return void e.replaceWith(t.cloneNode(!0));if(e.nodeType===Node.TEXT_NODE)return void(e.textContent!==t.textContent&&(e.textContent=t.textContent));const n=[...e.attributes],o=[...t.attributes];for(const t of o)e.getAttribute(t.name)!==t.value&&e.setAttribute(t.name,t.value);for(const o of n)t.hasAttribute(o.name)||e.removeAttribute(o.name);const r=[...e.childNodes],s=[...t.childNodes],i=Math.max(r.length,s.length);for(let t=0;t<i;t++)!r[t]&&s[t]?e.appendChild(s[t].cloneNode(!0)):r[t]&&!s[t]?r[t].remove():r[t]&&s[t]&&Diffing(r[t],s[t])}function t(e){throw new Error(`Elemento Invalido --\x3e ${e} <--`)}function n(e,{data:t,method:n}){return Object.freeze({title:e.title||"Error en Component",mensaje:e.message||"Error desconocido",error:e.toString(),stack:e.stack||"Sin stack",name:e.name||"Error",ruta:"string"==typeof t.url?t.url:"Objeto directo",metodo:n,fecha:(new Date).toString()})}function o(e){return Object.freeze({status:e.status,statusText:e.statusText,ok:e.ok,timestamp:Date.now(),contentType:e.headers.get("content-type")})}function r(e){Component({template:"/error/404.html",style:"/error/404.css",data:o(e)})}async function s(e,t){try{if("string"==typeof e&&e.trim().startsWith("<"))return e;if("object"==typeof e)return e;const n=e.split(".").pop().toLowerCase(),o=Object.freeze({method:t}),s=e.trim().startsWith("./")?e:`./components/${e}`,i=await fetch(s,o);if(!i.ok)return r(i);return"json"===n?await i.json():await i.text()}catch(e){console.error(e)}}function i(e,t){let n=t;for(const t of e.split("."))if(n=n?.[t],null==n)break;return n??""}function a(e){const t=e.split(/{{\s*(.*?)\s*}}/g);function n(e){let n="";for(let o=0;o<t.length;o++)n+=o%2==0?t[o]:i(t[o],e);return n}return function({data:e,limits:t}){const o=function(e){if(Array.isArray(e))return e;for(const t in e)if(Array.isArray(e[t]))return e[t];return[e]}(e);return("number"==typeof t?o.slice(0,t):o).map(n).join("")}}const c=Object.freeze({css(e){if(!e)return;const t=e.trim().startsWith("./")?e:`./components/${e.replace(/^\/+/,"")}`;if(!document.querySelector(`link[href="${t}"]`)){const e=document.createElement("link");e.rel="stylesheet",e.href=t,document.head.appendChild(e)}},js(e){if(console.log(e),!e)return;const t=e.startsWith("./")?e:`./components/${e.replace(/^\/+/,"")}`;if(!document.querySelector(`script[src="${t}"]`)){const e=document.createElement("script");e.src=t,e.type="module",document.body.appendChild(e)}}});function Component({selector:e="body",method:o="GET",template:r="",style:i="",script:l="",data:u="",limits:f=15}){return async function(){const d=document.querySelector(e);if(!d)return await t(e);try{const e=a(await s(r)),t=e({data:"string"==typeof u?await s(u,o):u,limits:f});f<=15?d.insertAdjacentHTML("beforeend",t):Diffing(d,t),function(e){const t=(Array.isArray(e)?e:[e]).filter(Boolean);for(const e of t){const t=e.split(".").pop().toLowerCase(),n=c[t];n?n(e):console.warn("Extension invalida:",t,"--\x3e",e)}}([i,l])}catch(e){return function(e,{data:t,method:o}){Component({method:o,template:"/error/error.html",style:"/error/error.css",data:n(e,{data:t,method:o})})}(e,{data:u,method:o})}}}window.Component=Component;const l={attrs:["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","onmouseenter","onmouseleave","onkeydown","onkeypress","onkeyup","onfocus","onblur","onchange","onsubmit","onreset","oninput","onselect","onload","onunload","onresize","onscroll","onerror","onhashchange","onpopstate","onbeforeunload","onabort","oncanplay","oncanplaythrough","ondurationchange","onemptied","onended","onerror","onloadeddata","onloadedmetadata","onpause","onplay","onplaying","onprogress","onratechange","onseeked","onseeking","onstalled","onsuspend","ontimeupdate","onvolumechange","onwaiting","ontouchstart","ontouchend","ontouchmove","ontouchcancel","ongesturestart","ongesturechange","ongestureend","onpointerdown","onpointerup","onpointermove","onpointerover","onpointerout","onpointerenter","onpointerleave","onpointercancel","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","oncopy","oncut","onpaste","onerror","onanimationstart","onanimationend","onanimationiteration","ontransitionend"],tags:["script","iframe","object","embed","applet","link","meta","base","form","frame","frameset","svg","math","style"]},u=Object.freeze({html:{fn:e=>{const t=(new DOMParser).parseFromString(e,"text/html");for(const e of t.querySelectorAll("*")){if(l.tags.includes(e.tagName.toLowerCase()))return!1;for(const t of e.attributes)if(l.attrs.includes(t.name.toLowerCase()))return!1}return!0},msg:"HTML invalido"},node:{fn:e=>Array.isArray(e)?e.every(e=>e instanceof Node):e instanceof Node,msg:"No es un Node"},string:{fn:e=>Array.isArray(e)?e.every(e=>"string"==typeof e&&e.trim().length>0):"string"==typeof e&&e.trim().length>0,msg:"No es un string valido"},callback:{fn:e=>"function"==typeof e,msg:"Debe ser una funcion"},object:{fn:e=>Array.isArray(e)?e.every(e=>"object"==typeof e&&null!==e):"object"==typeof e&&null!==e,msg:"Solo acepto objeto"},array:{fn:e=>Array.isArray(e),msg:"Esperando un arreglo"},number:{fn:e=>Array.isArray(e)?e.every(e=>"number"==typeof e):"number"==typeof e,msg:"Esperando un numero"},email:{fn:()=>{},msg:"Email invalido"}});function f(e={}){let t=[];for(const[n,o]of Object.entries(e)){if(!u[n])return;const{fn:e,msg:r}=u[n];e(o)||t.push({msg:r,value:JSON.stringify(o??" ")})}if(t.length>0){document.querySelector(".validate")?.remove();return void Component({template:`\n        <div class="validate glass">\n          <ul class="formValidate">\n            ${t.map(({msg:e,value:t})=>`<li><strong>${e}:</strong> ${t}</li>`).join("")}\n          </ul>\n        </div>\n      `,style:"./src/validate/validate.css"})()}}window.Validate=f;const d=new WeakMap;const m=Object.freeze({_forEach:function(e){for(let t=0;t<this.length;t++)e(this[t],t);return this},off(e,t){for(let n of this)n.removeEventListener(e,t);return this},toggleClass:function(e){f({string:e});const t=e.trim().split(/\s+/);return this._forEach(e=>{for(let n of t)e.classList.toggle(n)}),this},append:function(e){for(const t of this)t.insertAdjacentHTML("beforeend",e);return this},drag:function(){for(let e of this){if(d.has(e))continue;const t={isDraggable:!1,offsetX:0,offsetY:0,currentX:0,currentY:0};d.set(e,t),e.style.cursor="grab";const n=function(n){t.isDraggable&&(t.currentX=n.clientX-t.offsetX,t.currentY=n.clientY-t.offsetY,e.style.transform=`translate(${t.currentX}px, ${t.currentY}px)`)},o=function(){t.isDraggable=!1,e.style.cursor="grab",e.classList.toggle("select",!1),window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",o)},r=function(r){t.isDraggable=!0,t.offsetX=r.clientX-t.currentX,t.offsetY=r.clientY-t.currentY,e.style.cursor="grabbing",e.classList.toggle("select",!0),r.preventDefault(),window.addEventListener("mousemove",n),window.addEventListener("mouseup",o,{once:!0})};e.addEventListener("mousedown",r)}return this},on:function(e,t){for(const n of this)n.addEventListener(e,t);return this},get:async function(e){try{const t=await fetch(`./components${e}.html`);if(!t.ok)throw new Error(`HTTP ${t.status}`);const n=await t.text();this._forEach(e=>e.innerHTML+=n)}catch(e){console.error("$.html(): Falló la carga del componente:",e)}return this},post:async function(e,t={}){try{const n=Object.freeze({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),o=await fetch(`./components${e}.html`,n);if(!o.ok)throw new Error(`HTTP ${o.status}`);const r=await o.text();this._forEach(e=>e.innerHTML+=r)}catch(e){console.error("$.html(): Falló la carga del componente:",e)}return this},html:function(e){if(!e.endsWith(".html")){f({html:e});for(let t of this)t.insertAdjacentHTML("beforeend",e);return e}return(async()=>{try{const t=await fetch(e),n=await t.text();f({html:n});for(const e of this)e.insertAdjacentHTML("beforeend",n);return n}catch(e){console.error("Error al cargar HTML:",e)}})(),this},css:function(e){if("string"==typeof e&&e.endsWith(".css")){const t=e;if(!document.querySelector(`link[href="${t}"]`)){const e=document.createElement("link");e.rel="stylesheet",e.href=t,document.head.appendChild(e)}return this}if("object"==typeof e&&null!==e)return this._forEach(t=>{for(let[n,o]of Object.entries(e))t.style[n]=o}),this},js:function(e){if("string"==typeof e&&e.endsWith(".js")){const t=e;if(!document.querySelector(`script[src="${t}"]`)){const e=document.createElement("script");e.src=t,e.type="module",document.body.appendChild(e)}}return this},animate(e){for(let t of this)requestAnimationFrame(()=>e(t));return this},addClass(e){for(let t of this)t.classList.add(e);return this},removeClass(e){for(let t of this)t.classList.remove(e);return this},containsClass(e){for(let t of this)if(t.classList.contains(e))return!0;return this},hide(){for(let e of this)e.style.display="none";return this},show(){for(let e of this)e.style.display="";return this},val(e){e||el.val;for(let t of this)t.value=e;return this}});function p(e){if(!e||"object"!=typeof e&&"function"!=typeof e)return console.warn("aplicarMetodos: elemento inválido",e),e;for(const t of Object.keys(m))Object.defineProperty(e,t,{value:m[t],writable:!1,configurable:!1,enumerable:!1});return e}function $$(e){if("function"==typeof e)return void document.addEventListener("DOMContentLoaded",e);const n="string"==typeof e?[...document.querySelectorAll(e)]:e instanceof Element?[e]:e instanceof NodeList||Array.isArray(e)?[...e]:t(e);return n.length||t(e),p(n)}function $(e){if("function"==typeof e)return void("loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e());return p("string"==typeof e?document.querySelector(e):e instanceof Element?e:t(e))}window.$$=$$,window.$=$;const h=new Set,g={};function On(e,t){f({object:t});const n=g[e]||={};for(const o in t)o in n?console.warn(`El selector ${o} ya fue registrado en el evento ${e}`):n[o]=t[o];h.has(e)||(document.body.addEventListener(e,function(e){for(const[t,o]of Object.entries(n)){const n=e.target.closest(t);n&&o.call(n,e)}}),h.add(e))}function Drag(e={}){On("mousedown",function(t){for(const[n,o]of Object.entries(e)){const e=t.target.closest(n);if(e){const n=t.target.closest(o);if(!e||!n)return;let r=t.clientX-n.getBoundingClientRect().left,s=t.clientY-n.getBoundingClientRect().top;n.style.cursor="grabbing",n.classList.toggle("select");const i=t=>{const o=e.getBoundingClientRect(),i=n.getBoundingClientRect();let a=t.clientX-o.left-r,c=t.clientY-o.top-s;const l=Math.max(0,Math.min(a,o.width-i.width)),u=Math.max(0,Math.min(c,o.height-i.height));n.style.transform=`translate(${l}px, ${u}px)`},a=e=>{n.style.cursor="grab",n.classList.toggle("select"),document.body.removeEventListener("mousemove",i),document.body.removeEventListener("mouseup",a)};document.body.addEventListener("mousemove",i),document.body.addEventListener("mouseup",a)}}})}function y(e={},{ext:t=["png","jpg","jpeg"]}={}){const n=t.map(e=>e.toLowerCase());On("dragstart",e=>{e.target}),On("dragover",e=>{e.preventDefault()}),On("dragenter",e=>{console.log("drag enter");e.target&&e.preventDefault()}),On("drop",function(o){o.preventDefault();if([...o.dataTransfer.files].filter(e=>{const t=e.name.split(".").pop().toLowerCase();return!n.includes(t)}).length>0)return console.error(`Extensiones permitidas: --\x3e ${t.join(" ")} <--`);for(const[t,n]of Object.entries(e)){const e=o.target.closest(t);e&&n.call(e,o)}})}window.On=On,window.Drag=Drag,window.Drop=y;const w=Object.freeze({ctrl:"ctrlKey",alt:"altKey",shift:"shiftKey",meta:"metaKey"});function b(e={}){On("keydown",function(t){for(const[n,o]of Object.entries(e)){const e=n.toLowerCase().split("+");if(e.length<2||e.length>4)continue;const r=e.pop(),s=e.every(e=>w[e]&&t[w[e]]),i=t.key.toLowerCase()===r;s&&i&&o.call(t.target,t)}})}window.Shortcut=b;const Click=(e={})=>On("click",e);window.Click=Click;const Input=(e={})=>On("input",e);window.Input=Input;const v={GET:()=>({method:"GET",headers:{"Content-Type":"application/json"}}),POST:e=>({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),PUT:e=>({method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),DELETE:e=>({method:"DELETE",headers:{"Content-Type":"application/json"}})};async function E(e,t,n,o){try{const s=await fetch(t,v[e.toUpperCase()](n)),i=s.headers.get("content-type");if(!s.ok)return r(s);if(!i.includes("application/json"))throw new Error(`Solo acepta JSON. Recibido: ${i}`);const a=await s.json();return o?o(a):a}catch(e){throw e}}const j=Object.freeze({get:(e,t)=>E("GET",e,null,t),post:(e,t,n)=>E("POST",e,t,n),put:(e,t,n)=>E("PUT",e,t,n),delete:(e,t)=>E("DELETE",e,null,t)});return window.ajax=j,e.$$=$$,e.Click=Click,e.Component=Component,e.Drag=Drag,e.Drop=y,e.Input=Input,e.On=On,e.Shortcut=b,e.ajax=j,e.default=$,e.validate=f,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
//# sourceMappingURL=$.min.js.map
