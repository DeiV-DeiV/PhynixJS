{"version":3,"file":"mi$.js","sources":["../src/core.js","../src/index.js"],"sourcesContent":["// core.js\r\n// consume menos memoria, mi punto es ese\r\n\r\nimport { metodos } from \"./dom.js\";\r\n\r\nconst DEBUG = false;\r\nconst x = (...args) => DEBUG && console.log(...args);\r\n\r\nconst DEV_MODO = false; // usar FALSE para produccion\r\n\r\nconst aplicarMetodos = (nodoArray) => {\r\n  // evita usar proxy\r\n  for (const nameMetodo of Object.keys(metodos)) {\r\n    Object.defineProperty(nodoArray, nameMetodo, {\r\n      value: metodos[nameMetodo],\r\n      writable: false,\r\n      configurable: false,\r\n      enumerable: false,\r\n    });\r\n  }\r\n\r\n  // Previene agregar nuevas propiedades\r\n  return Object.freeze(nodoArray);\r\n  // Object.freeze(Persona.prototype);\r\n};\r\n\r\nconst crearProxyProtegido = (nodoArray) => {\r\n  return new Proxy(nodoArray, {\r\n    get(target, prop) {\r\n      if (prop in target) return target[prop];\r\n      if (prop in metodos) {\r\n        const fn = metodos[prop];\r\n        Object.defineProperty(target, prop, {\r\n          value: fn,\r\n          writable: false,\r\n          configurable: false,\r\n          enumerable: false,\r\n        });\r\n\r\n        return fn;\r\n      }\r\n\r\n      return undefined;\r\n    },\r\n\r\n    set(target, prop, value) {\r\n      if (prop in metodos)\r\n        throw new Error(`No puedes sobreescribir el metodo ${prop}`);\r\n      target[prop] = value;\r\n      return true;\r\n    },\r\n  });\r\n};\r\n\r\nexport const mi$ = (selector) => {\r\n  if (typeof selector === \"function\") {\r\n    document.addEventListener(\"DOMContentLoaded\", selector);\r\n    return;\r\n  }\r\n\r\n  if (typeof selector === \"string\") {\r\n    const elements = Array.from(document.querySelectorAll(selector));\r\n\r\n    return DEV_MODO\r\n      ? crearProxyProtegido(elements)\r\n      : aplicarMetodosEstÃ¡ticos(elements);\r\n  }\r\n\r\n  return [];\r\n};\r\n","// index.js\r\nimport { mi$ } from \"./core.js\";\r\n\r\nexport const $ = (selector) => mi$(selector);\r\nwindow.$ = (selector) => mi$(selector)\r\n"],"names":[],"mappings":";;;EAAA;EACA;AACA;AAmDA;EACO,MAAM,GAAG,GAAG,CAAC,QAAQ,KAAK;EACjC,EAAE,IAAI,OAAO,QAAQ,KAAK,UAAU,EAAE;EACtC,IAAI,QAAQ,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,QAAQ,CAAC,CAAC;EAC5D,IAAI,OAAO;EACX,EAAE,CAAC;AACH;EACA,EAAE,IAAI,OAAO,QAAQ,KAAK,QAAQ,EAAE;EACpC,IAAI,MAAM,QAAQ,GAAG,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAC,CAAC;AACrE;EACA,IAAI,OAEI,uBAAuB,CAAC,QAAQ,CAAC,CAAC;EAC1C,EAAE,CAAC;AACH;EACA,EAAE,OAAO,EAAE,CAAC;EACZ,CAAC;;ECrED;AAEA;AACY,QAAC,CAAC,GAAG,CAAC,QAAQ,KAAK,GAAG,CAAC,QAAQ,EAAE;EAC7C,MAAM,CAAC,CAAC,GAAG,CAAC,QAAQ,KAAK,GAAG,CAAC,QAAQ;;;;;;;;;;"}