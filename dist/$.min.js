var $=function(t){"use strict";function Diffing(t,e){if(t===e)return;if(t.nodeType!==e.nodeType||t.nodeName!==e.nodeName)return void t.replaceWith(e.cloneNode(!0));if(t.nodeType===Node.TEXT_NODE)return void(t.textContent!==e.textContent&&(t.textContent=e.textContent));const n=[...t.attributes],o=[...e.attributes];for(const e of o)t.getAttribute(e.name)!==e.value&&t.setAttribute(e.name,e.value);for(const o of n)e.hasAttribute(o.name)||t.removeAttribute(o.name);const r=[...t.childNodes],s=[...e.childNodes],i=Math.max(r.length,s.length);for(let e=0;e<i;e++)!r[e]&&s[e]?t.appendChild(s[e].cloneNode(!0)):r[e]&&!s[e]?r[e].remove():r[e]&&s[e]&&Diffing(r[e],s[e])}const e=Object.freeze({css(t){if(!t)return;const e=t.trim().startsWith("./")?t:`./components/${t.replace(/^\/+/,"")}`;if(!document.querySelector(`link[href="${e}"]`)){const t=document.createElement("link");t.rel="stylesheet",t.href=e,document.head.appendChild(t)}},js(t){if(console.log(t),!t)return;const e=t.startsWith("./")?t:`./components/${t.replace(/^\/+/,"")}`;if(!document.querySelector(`script[src="${e}"]`)){const t=document.createElement("script");t.src=e,t.type="module",document.body.appendChild(t)}}});function n(t){throw new Error(`Elemento Invalido --\x3e ${t} <--`)}Component({template:"/error/404.html",data:{url:function(t){return Object.freeze({status:t.status,statusText:t.statusText,ok:t.ok,timestamp:Date.now(),contentType:t.headers.get("content-type")})}(res)}});async function o(t,e){try{if("string"==typeof t&&t.trim().startsWith("<"))return t;if("object"==typeof t)return t;const n=t.split(".").pop().toLowerCase(),o=Object.freeze({method:e}),r=t.trim().startsWith("./")?t:`./components/${t}`,s=await fetch(r,o);if(!s.ok)return;return"json"===n?await s.json():await s.text()}catch(t){console.error(t)}}function r(t,e){let n=e;for(const e of t.split("."))if(n=n?.[e],null==n)break;return n??""}function s(t){const e=t.split(/{{\s*(.*?)\s*}}/g);function n(t){let n="";for(let o=0;o<e.length;o++)n+=o%2==0?e[o]:r(e[o],t);return n}return function({data:t,limits:e}){const o=function(t){if(Array.isArray(t))return t;for(const e in t)if(Array.isArray(t[e]))return t[e];return[t]}(t);return("number"==typeof e?o.slice(0,e):o).map(n).join("")}}function i({selector:t="body",method:r="GET",template:c="",script:a="",style:l="",data:u={url:"",limits:15},diffing:f=!1}){return async function(){const d=document.querySelector(t);d||await n(t);try{const t=s(await o(c)),n=t({data:"string"==typeof u.url?await o(u.url,r):u.url,limits:u.limits});!f||u.limits<=15?d.insertAdjacentHTML("beforeend",n):Diffing(d,n),await function(t){const n=(Array.isArray(t)?t:[t]).filter(Boolean);for(const t of n){const n=t.split(".").pop().toLowerCase(),o=e[n];o?o(t):console.warn("Extension invalida:",n,"--\x3e",t)}}([l,a])}catch(t){const e=function(t,{data:e,method:n}){return Object.freeze({title:t.title||"Error en Component",mensaje:t.message||"Error desconocido",error:t.toString(),stack:t.stack||"Sin stack",name:t.name||"Error",ruta:"string"==typeof e.url?e.url:"Objeto directo",metodo:n,fecha:(new Date).toString()})}(t,{data:u,method:r});if(!c.includes("/error/"))return void i({template:"/error/error.html",style:"/error/error.css",data:{url:e}})();console.error("Error de Component",t)}}}window.Component=i;const c=Object.freeze({node:{fn:t=>Array.isArray(t)?t.some(t=>!(t instanceof Node)):!(t instanceof Node),msg:"No es un Node"},string:{fn:t=>Array.isArray(t)?t.some(t=>"string"!=typeof t||!t.trim()):"string"!=typeof t||!t.trim(),msg:"No es un string válido"},callback:{fn:t=>"function"!=typeof t||null===t,msg:"Debe ser una función"},object:{fn:t=>"object"!=typeof t||null===t,msg:"Solo acepto objeto"},array:{fn:t=>!Array.isArray(t),msg:"Esperando un arreglo"},number:{fn:t=>"number"!=typeof t,msg:"Esperando un número"}});function a(t={}){let e=[];for(const[n,{fn:o,msg:r}]of Object.entries(c)){const s=t[n],i=o(s);if(i){const t=s??" ";e.push({msg:r,value:i?JSON.stringify(s):t})}}if(e.length>0){document.querySelector(".validate")?.remove();return void i({template:`\n        <div class="validate glass">\n          <ul class="formValidate">\n            ${e.map(({msg:t,value:e})=>`<li><strong>${t}:</strong> ${e}</li>`).join("")}\n          </ul>\n        </div>\n      `,style:"./src/validate/validate.css"})()}}window.Validate=a;const l=new WeakMap;const u=Object.freeze({_forEach:function(t){for(let e=0;e<this.length;e++)t(this[e],e);return this},off(t,e){for(let n of this)n.removeEventListener(t,e);return this},toggleClass:function(t){a({string:t});const e=t.trim().split(/\s+/);return this._forEach(t=>{for(let n of e)t.classList.toggle(n)}),this},css:function(t={}){return a({object:t}),this._forEach(e=>{for(let[n,o]of Object.entries(t))e.style[n]=o}),this},append:function(t){a({string:t});for(const e of this)e.insertAdjacentHTML("beforeend",t);return this},drag:function(){for(let t of this){if(l.has(t))continue;const e={isDraggable:!1,offsetX:0,offsetY:0,currentX:0,currentY:0};l.set(t,e),t.style.cursor="grab";const n=function(n){e.isDraggable&&(e.currentX=n.clientX-e.offsetX,e.currentY=n.clientY-e.offsetY,t.style.transform=`translate(${e.currentX}px, ${e.currentY}px)`)},o=function(){e.isDraggable=!1,t.style.cursor="grab",t.classList.toggle("select",!1),window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",o)},r=function(r){e.isDraggable=!0,e.offsetX=r.clientX-e.currentX,e.offsetY=r.clientY-e.currentY,t.style.cursor="grabbing",t.classList.toggle("select",!0),r.preventDefault(),window.addEventListener("mousemove",n),window.addEventListener("mouseup",o,{once:!0})};t.addEventListener("mousedown",r)}return this},on:function(t,e){for(const n of this)n.addEventListener(t,e);return this},get:async function(t){if(!t||"string"!=typeof t)return console.error(" $.html(): Ruta inválida."),this;try{const e=await fetch(`./components${t}.html`);if(!e.ok)throw new Error(`HTTP ${e.status}`);const n=await e.text();this._forEach(t=>t.innerHTML+=n)}catch(t){console.error("$.html(): Falló la carga del componente:",t)}return this},post:async function(t,e={}){if(!t||"string"!=typeof t)return console.error("$.html(): Ruta inválida."),this;try{const n=Object.freeze({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),o=await fetch(`./components${t}.html`,n);if(!o.ok)throw new Error(`HTTP ${o.status}`);const r=await o.text();this._forEach(t=>t.innerHTML+=r)}catch(t){console.error("$.html(): Falló la carga del componente:",t)}return this},html(t){for(let e of this)e.innerHTML=t;return this},animate(t){for(let e of this)requestAnimationFrame(()=>t(e));return this},addClass(t){for(let e of this)e.classList.add(t);return this},removeClass(t){for(let e of this)e.classList.remove(t);return this},containsClass(t){for(let e of this)if(e.classList.contains(t))return!0;return this},hide(){for(let t of this)t.style.display="none";return this},val(){for(let t of this)t.value;return this}});function f(t){if(!t||"object"!=typeof t&&"function"!=typeof t)return console.warn("aplicarMetodos: elemento inválido",t),t;for(const e of Object.keys(u))Object.defineProperty(t,e,{value:u[e],writable:!1,configurable:!1,enumerable:!1});return t}const d=new Set,m={};function On(t,e){a({string:t,object:e});const n=m[t]||={};Object.assign(n,e),d.has(t)||(d.add(t),document.body.addEventListener(t,function(t){for(const[e,o]of Object.entries(n)){const n=t.target.closest(e);n&&o.call(n,t)}}))}function $$(t){if("function"==typeof t)return void document.addEventListener("DOMContentLoaded",t);const e="string"==typeof t?[...document.querySelectorAll(t)]:t instanceof Element?[t]:t instanceof NodeList||Array.isArray(t)?[...t]:n(t);return e.length||n(t),f(e)}function $(t){if("function"==typeof t)return void("loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t());return f("string"==typeof t?document.querySelector(t):t instanceof Element?t:n(t))}window.On=On,window.$$=$$,window.$=$;const Click=(t={})=>On("click",t);window.Click=Click;const Input=(t={})=>On("input",t);function Drag(t={}){On("mousedown",function(e){for(const[n,o]of Object.entries(t)){const t=e.target.closest(n);if(t){const n=e.target.closest(o);if(!t||!n)return;let r=e.clientX-n.getBoundingClientRect().left,s=e.clientY-n.getBoundingClientRect().top;n.style.cursor="grabbing",n.classList.toggle("select");const i=e=>{const o=t.getBoundingClientRect(),i=n.getBoundingClientRect();let c=e.clientX-o.left-r,a=e.clientY-o.top-s;const l=Math.max(0,Math.min(c,o.width-i.width)),u=Math.max(0,Math.min(a,o.height-i.height));n.style.transform=`translate(${l}px, ${u}px)`},c=t=>{n.style.cursor="grab",n.classList.toggle("select"),document.body.removeEventListener("mousemove",i),document.body.removeEventListener("mouseup",c)};document.body.addEventListener("mousemove",i),document.body.addEventListener("mouseup",c)}}})}function h(t={},{ext:e=["png","jpg","jpeg"]}={}){const n=e.map(t=>t.toLowerCase());On("dragstart",t=>{t.target}),On("dragover",t=>{t.preventDefault()}),On("dragenter",t=>{console.log("drag enter");t.target&&t.preventDefault()}),On("drop",function(o){o.preventDefault();if([...o.dataTransfer.files].filter(t=>{const e=t.name.split(".").pop().toLowerCase();return!n.includes(e)}).length>0)return console.error(`Extensiones permitidas: --\x3e ${e.join(" ")} <--`);for(const[e,n]of Object.entries(t)){const t=o.target.closest(e);t&&n.call(t,o)}})}window.Input=Input,window.Drag=Drag,window.Drop=h;const p=Object.freeze({ctrl:"ctrlKey",alt:"altKey",shift:"shiftKey",meta:"metaKey"});function g(t={}){On("keydown",function(e){for(const[n,o]of Object.entries(t)){const t=n.toLowerCase().split("+");if(t.length<2||t.length>4)continue;const r=t.pop(),s=t.every(t=>p[t]&&e[p[t]]),i=e.key.toLowerCase()===r;s&&i&&o.call(e.target,e)}})}return window.Shortcut=g,t.$$=$$,t.Click=Click,t.Component=i,t.Drag=Drag,t.Drop=h,t.Input=Input,t.On=On,t.Shortcut=g,t.default=$,t.validate=a,Object.defineProperty(t,"__esModule",{value:!0}),t}({});
//# sourceMappingURL=$.min.js.map
