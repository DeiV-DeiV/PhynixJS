var $=function(){"use strict";function t(e,n){if(e.nodeType!==n.nodeType||e.nodeName!==n.nodeName)return void e.replaceWith(n.cloneNode(!0));if(e.nodeType===Node.TEXT_NODE)return void(e.textContent!==n.textContent&&(e.textContent=n.textContent));const o=[...e.attributes],r=[...n.attributes];for(const t of r)e.getAttribute(t.name)!==t.value&&e.setAttribute(t.name,t.value);for(const t of o)n.hasAttribute(t.name)||e.removeAttribute(t.name);const s=[...e.childNodes],i=[...n.childNodes],c=Math.max(s.length,i.length);for(let n=0;n<c;n++)!s[n]&&i[n]?e.appendChild(i[n].cloneNode(!0)):s[n]&&!i[n]?(s[n].remove(),n--):s[n]&&i[n]&&t(s[n],i[n])}const e=Object.freeze({on(t,e){"string"==typeof t&&t.trim()||console.error(`El ${t} no existe`);for(const[t,n]of Object.entries(e))"string"==typeof t&&t.trim()||console.error(`El ${t} no existe`),"function"==typeof n&&null!==n||console.error(`El ${n} no es una funcion`)},append(t){if(!t)throw new Error("Ingresa template");if("string"!=typeof t)throw new Error("Solo acepto STRING")},val(t){if("string"!=typeof t)throw new Error("val espera string")},css(t,e){if("string"!=typeof t)throw new Error("css espera propiedad tipo string");if(!t.trim())throw new Error("propiedad no puede estar vacía");if("string"!=typeof e)throw new Error("css espera valor tipo string")},get(t,e){if("string"!=typeof t||!t.trim())throw new Error("URL inválida para get");if("function"!=typeof e)throw new Error("Callback debe ser función para get")},post(t,e,n){if("string"!=typeof t||!t.trim())throw new Error("URL inválida para post");if("object"!=typeof e||null===e)throw new Error("Datos inválidos para post");if("function"!=typeof n)throw new Error("Callback debe ser función para post")}}),n=Object.freeze({node:{fn:t=>Array.isArray(t)?t.some(t=>!(t instanceof Node)):!(t instanceof Node),msg:"No es un Node"},string:{fn:t=>Array.isArray(t)?t.some(t=>"string"!=typeof t||!t.trim()):"string"!=typeof t||!t.trim(),msg:"No es un string válido"},callback:{fn:t=>"function"!=typeof t||null===t,msg:"Debe ser una función"},object:{fn:t=>"object"!=typeof t||null===t,msg:"Solo acepto objeto"},array:{fn:t=>!Array.isArray(t),msg:"Esperando un arreglo"},number:{fn:t=>"number"!=typeof t,msg:"Esperando un número"}});function o(t={}){for(const[e,{fn:o,msg:r}]of Object.entries(n)){const n=t[e];if(e in t&&o(n)){const t=Array.isArray(n)?`${r} :\n [${n.map((t,e)=>o(t)?`${JSON.stringify(t)}`:`${t}`).join(", ")}]`:`${r}: ${n}`;console.log(t)}}}window.Validate=o;const r=new Set;function s(t){throw new Error(`Elemento Invalido --\x3e ${t} <--`)}window.Component=function({selector:e="body",method:n="GET",template:s,script:i,style:c,data:a={}},{once:l=!0}={}){return o({string:[e,n,s,i,c],object:a}),async function(){if(!s&&!i&&!c)return;if(l&&r.has(s))return console.warn(`Componente cargado en el ${e}...`);const o=document.querySelector(e);if(!o)return console.warn(`--\x3e ${e} <-- no existe en el documento...`);try{const e={method:n},f=await fetch(`./components/${s}`,e),u=(await f.text()).replace(/{{(.*?)}}/g,(t,e)=>a[e.trim()]??"");if(t(o,(new DOMParser).parseFromString(u,"text/html").body),l&&r.add(s),c&&!document.querySelector(`link[href="./components/${c}"]`)){const t=document.createElement("link");t.rel="stylesheet",t.href=`./components/${c}`,document.head.appendChild(t)}if(i&&!document.querySelector(`script[src="./components/${i}"]`)){const t=document.createElement("script");t.src=`./components/${i}`,t.type="module",document.body.appendChild(t)}}catch(e){const n=await fetch("./components/error/error.html"),r=await n.text();t(o,(new DOMParser).parseFromString(r,"text/html").body)}}},console.log(r);const i=new WeakMap;const c=Object.freeze({_forEach:function(t){for(let e=0;e<this.length;e++)t(this[e],e);return this},off(t,e){for(let n of this)n.removeEventListener(t,e);return this},toggleClass:function(t){const e=t.trim().split(/\s+/);return this._forEach(t=>{for(let n of e)t.classList.toggle(n)}),this},css:function(t={}){return this._forEach(e=>{for(let[n,o]of Object.entries(t))e.style[n]=o}),this},append:function(t){e.append(t);for(const e of this)e.insertAdjacentHTML("beforeend",t);return this},drag:function(){for(let t of this){if(i.has(t))continue;const e={isDraggable:!1,offsetX:0,offsetY:0,currentX:0,currentY:0};i.set(t,e),t.style.cursor="grab";const n=function(n){e.isDraggable&&(e.currentX=n.clientX-e.offsetX,e.currentY=n.clientY-e.offsetY,t.style.transform=`translate(${e.currentX}px, ${e.currentY}px)`)},o=function(){e.isDraggable=!1,t.style.cursor="grab",t.classList.toggle("select",!1),window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",o)},r=function(r){e.isDraggable=!0,e.offsetX=r.clientX-e.currentX,e.offsetY=r.clientY-e.currentY,t.style.cursor="grabbing",t.classList.toggle("select",!0),r.preventDefault(),window.addEventListener("mousemove",n),window.addEventListener("mouseup",o,{once:!0})};t.addEventListener("mousedown",r)}return this},on:function(t,e){for(const n of this)n.addEventListener(t,e);return this},get:async function(t){if(!t||"string"!=typeof t)return console.error(" $.html(): Ruta inválida."),this;try{const e=await fetch(`./components${t}.html`);if(!e.ok)throw new Error(`HTTP ${e.status}`);const n=await e.text();this._forEach(t=>t.innerHTML+=n)}catch(t){console.error("$.html(): Falló la carga del componente:",t)}return this},post:async function(t,e={}){if(!t||"string"!=typeof t)return console.error("$.html(): Ruta inválida."),this;try{const n=Object.freeze({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),o=await fetch(`./components${t}.html`,n);if(!o.ok)throw new Error(`HTTP ${o.status}`);const r=await o.text();this._forEach(t=>t.innerHTML+=r)}catch(t){console.error("$.html(): Falló la carga del componente:",t)}return this},html(t){for(let e of this)e.innerHTML=t;return this},animate(t){for(let e of this)requestAnimationFrame(()=>t(e));return this},addClass(t){for(let e of this)e.classList.add(t);return this},removeClass(t){for(let e of this)e.classList.remove(t);return this},containsClass(t){for(let e of this)if(e.classList.contains(t))return!0;return this},hide(){for(let t of this)t.style.display="none";return this},val(){for(let t of this)t.value;return this}});function a(t){const e={ele:Array.isArray(t)?t:[t],apply(t){for(const e of this.ele)t(e);return this}};for(const[t,n]of Object.entries(c))e[t]=function(...t){return e.apply(function(e){n(e,...t)}),e};return e}const l=new Set,f={};function u(t,e){o({string:t,object:e});const n=f[t]||={};Object.assign(n,e),l.has(t)||(l.add(t),document.body.addEventListener(t,function(t){for(const[e,o]of Object.entries(n)){const n=t.target.closest(e);n&&o.call(n,t)}}))}function d(t){if("function"==typeof t)return void("loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t());const e="string"==typeof t?document.querySelector(t):t instanceof Element?t:s(t);return e.length||s(t),a(e)}window.On=u,console.log("Mapeo de Eventos: \n",f),window.$$=function(t){if("function"==typeof t)return void document.addEventListener("DOMContentLoaded",t);const e="string"==typeof t?[...document.querySelectorAll(t)]:t instanceof Element?[t]:t instanceof NodeList||Array.isArray(t)?[...t]:s(t);return e.length||s(t),a(e)},window.$=d;window.Click=(t={})=>u("click",t);return window.Input=(t={})=>u("input",t),window.x=function(...t){return console.log(...t)},window.Drag=function(t={}){u("mousedown",function(e){for(const[n,o]of Object.entries(t)){const t=e.target.closest(n);if(t){const n=e.target.closest(o);if(!t||!n)return;let r=0,s=0,i=0,c=0;n.style.cursor="grabbing",n.classList.toggle("select"),r=e.clientX-i,s=e.clientY-c;const a=t.getBoundingClientRect(),l=n.getBoundingClientRect(),f=t=>{i=t.clientX-r,c=t.clientY-s;const e=a.width-l.width,o=a.height-l.height,f=Math.max(0,Math.min(i,e)),u=Math.max(0,Math.min(c,o));n.style.transform=`translate(${f}px, ${u}px)`},u=t=>{n.style.cursor="grab",n.classList.toggle("select"),window.removeEventListener("mousemove",f),window.removeEventListener("mouseup",u)};window.addEventListener("mousemove",f),window.addEventListener("mouseup",u)}}})},window.Drop=function(t={},{ext:e=["png","jpg","jpeg"]}={}){const n=e.map(t=>t.toLowerCase());u("dragstart",t=>{t.target}),u("dragover",t=>{t.preventDefault()}),u("dragenter",t=>{console.log("drag enter");t.target&&t.preventDefault()}),u("drop",function(o){o.preventDefault();if([...o.dataTransfer.files].filter(t=>{const e=t.name.split(".").pop().toLowerCase();return!n.includes(e)}).length>0)return console.error(`Extensiones permitidas: --\x3e ${e.join(" ")} <--`);for(const[e,n]of Object.entries(t)){const t=o.target.closest(e);t&&n.call(t,o)}})},d}();
//# sourceMappingURL=$.min.js.map
