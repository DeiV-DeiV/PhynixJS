var $=function(e){"use strict";function Component({selector:e="body",method:t="GET",template:n="",style:o="",script:r="",data:s="",limit:i=15}){return function(){try{const a=$(e);a.html(n,{method:t,data:s,limit:i}),a.css(o),a.js(r)}catch(e){console.log("Error en Component:",e)}}}window.Component=Component;const t={attrs:["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","onmouseenter","onmouseleave","onkeydown","onkeypress","onkeyup","onfocus","onblur","onchange","onsubmit","onreset","oninput","onselect","onload","onunload","onresize","onscroll","onerror","onhashchange","onpopstate","onbeforeunload","onabort","oncanplay","oncanplaythrough","ondurationchange","onemptied","onended","onerror","onloadeddata","onloadedmetadata","onpause","onplay","onplaying","onprogress","onratechange","onseeked","onseeking","onstalled","onsuspend","ontimeupdate","onvolumechange","onwaiting","ontouchstart","ontouchend","ontouchmove","ontouchcancel","ongesturestart","ongesturechange","ongestureend","onpointerdown","onpointerup","onpointermove","onpointerover","onpointerout","onpointerenter","onpointerleave","onpointercancel","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","oncopy","oncut","onpaste","onerror","onanimationstart","onanimationend","onanimationiteration","ontransitionend"],tags:["script","iframe","object","embed","applet","link","meta","base","form","frame","frameset","svg","math","style"]},n=Object.freeze({html:{fn:e=>{const n=(new DOMParser).parseFromString(e,"text/html");for(const e of n.querySelectorAll("*")){if(t.tags.includes(e.tagName.toLowerCase()))return!1;for(const n of e.attributes)if(t.attrs.includes(n.name.toLowerCase()))return!1}return!0},msg:"HTML invalido"},node:{fn:e=>Array.isArray(e)?e.every(e=>e instanceof Node):e instanceof Node,msg:"No es un Node"},string:{fn:e=>Array.isArray(e)?e.every(e=>"string"==typeof e&&e.trim().length>0):"string"==typeof e&&e.trim().length>0,msg:"No es un string valido"},callback:{fn:e=>"function"==typeof e,msg:"Debe ser una funcion"},object:{fn:e=>Array.isArray(e)?e.every(e=>"object"==typeof e&&null!==e):"object"==typeof e&&null!==e,msg:"Solo acepto objeto"},array:{fn:e=>Array.isArray(e),msg:"Esperando un arreglo"},number:{fn:e=>Array.isArray(e)?e.every(e=>"number"==typeof e):"number"==typeof e,msg:"Esperando un numero"},email:{fn:()=>{},msg:"Email invalido"}});function o(e={}){let t=[];for(const[o,r]of Object.entries(e)){if(!n[o])return;const{fn:e,msg:s}=n[o];e(r)||t.push({msg:s,value:JSON.stringify(r??" ")})}if(t.length>0){document.querySelector(".validate")?.remove();return void Component({template:`\n        <div class="validate glass">\n          <ul class="formValidate">\n            ${t.map(({msg:e,value:t})=>`<li><strong>${e}:</strong> ${t}</li>`).join("")}\n          </ul>\n        </div>\n      `,style:"./src/validate/validate.css"})()}}window.Validate=o;const r=new WeakMap;function s(e,t){let n=t;for(const t of e.split("."))if(n=n?.[t],null==n)break;return n??""}function Diffing(e,t){if(e===t)return;if(e.nodeType!==t.nodeType||e.nodeName!==t.nodeName)return void e.replaceWith(t.cloneNode(!0));if(e.nodeType===Node.TEXT_NODE)return void(e.textContent!==t.textContent&&(e.textContent=t.textContent));const n=[...e.attributes],o=[...t.attributes];for(const t of o)e.getAttribute(t.name)!==t.value&&e.setAttribute(t.name,t.value);for(const o of n)t.hasAttribute(o.name)||e.removeAttribute(o.name);const r=[...e.childNodes],s=[...t.childNodes],i=Math.max(r.length,s.length);for(let t=0;t<i;t++)!r[t]&&s[t]?e.appendChild(s[t].cloneNode(!0)):r[t]&&!s[t]?r[t].remove():r[t]&&s[t]&&Diffing(r[t],s[t])}const i=Object.freeze({_forEach:function(e){for(let t=0;t<this.length;t++)e(this[t],t);return this},off(e,t){for(let n of this)n.removeEventListener(e,t);return this},toggleClass:function(e){o({string:e});const t=e.trim().split(/\s+/);return this._forEach(e=>{for(let n of t)e.classList.toggle(n)}),this},append:function(e){for(const t of this)t.insertAdjacentHTML("beforeend",e);return this},drag:function(){for(let e of this){if(r.has(e))continue;const t={isDraggable:!1,offsetX:0,offsetY:0,currentX:0,currentY:0};r.set(e,t),e.style.cursor="grab";const n=function(n){t.isDraggable&&(t.currentX=n.clientX-t.offsetX,t.currentY=n.clientY-t.offsetY,e.style.transform=`translate(${t.currentX}px, ${t.currentY}px)`)},o=function(){t.isDraggable=!1,e.style.cursor="grab",e.classList.toggle("select",!1),window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",o)},s=function(r){t.isDraggable=!0,t.offsetX=r.clientX-t.currentX,t.offsetY=r.clientY-t.currentY,e.style.cursor="grabbing",e.classList.toggle("select",!0),r.preventDefault(),window.addEventListener("mousemove",n),window.addEventListener("mouseup",o,{once:!0})};e.addEventListener("mousedown",s)}return this},on:function(e,t){for(const n of this)n.addEventListener(e,t);return this},get:async function(e){try{const t=await fetch(`./components${e}.html`);if(!t.ok)throw new Error(`HTTP ${t.status}`);const n=await t.text();this._forEach(e=>e.innerHTML+=n)}catch(e){console.error("$.html(): Falló la carga del componente:",e)}return this},post:async function(e,t={}){try{const n=Object.freeze({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),o=await fetch(`./components${e}.html`,n);if(!o.ok)throw new Error(`HTTP ${o.status}`);const r=await o.text();this._forEach(e=>e.innerHTML+=r)}catch(e){console.error("$.html(): Falló la carga del componente:",e)}return this},html:function(e,{method:t="GET",data:n=null,limit:r=15}={}){if(!e)for(const e of this)return e.innerHTML;return(async()=>{try{const i=e.endsWith(".html")?await(await fetch(`./components/${e}`)).text():e;o({html:i});const a=function(e){if(Array.isArray(e))return e;for(const t in e)if(Array.isArray(e[t]))return e[t];return[e]}("string"==typeof n&&n.endsWith(".json")?await(await fetch(n,{method:t})).json():n),c=r?a.slice(0,r):a,l=i.split(/{{\s*(.*?)\s*}}/g);let u="";for(const e of c)for(let t=0;t<l.length;t++)u+=t%2==0?l[t]:s(l[t],e);for(const e of this)r<=15?e.insertAdjacentHTML("beforeend",u):Diffing(e,u);return this}catch(e){console.error("Error al cargar metodo .html :",e)}})()},css:function(e){if("string"==typeof e&&e.endsWith(".css")&&!document.querySelector(`link[href="${e}"]`)){const t=document.createElement("link");t.rel="stylesheet",t.href=e,document.head.appendChild(t)}if("object"==typeof e&&null!==e)for(const t of this)for(let[n,o]of Object.entries(e))t.style[n]=o;return this},js:function(e){if("string"==typeof e&&e.endsWith(".js")){const t=e;if(!document.querySelector(`script[src="${t}"]`)){const e=document.createElement("script");e.src=t,e.type="module",document.body.appendChild(e)}}return this},animate(e){for(let t of this)requestAnimationFrame(()=>e(t));return this},addClass(e){for(let t of this)t.classList.add(e);return this},removeClass(e){for(let t of this)t.classList.remove(e);return this},containsClass(e){for(let t of this)if(t.classList.contains(e))return!0;return this},hide(){for(let e of this)e.style.display="none";return this},show(){for(let e of this)e.style.display="";return this},val(e){e||el.val;for(let t of this)t.value=e;return this}});function a(e){for(const t of Object.keys(i))Object.defineProperty(e,t,{value:i[t],writable:!1,configurable:!1,enumerable:!1});return e}function c(e){throw new Error(`Elemento Invalido --\x3e ${e} <--`)}function $$(e){if("function"==typeof e)return void document.addEventListener("DOMContentLoaded",e);const t="string"==typeof e?document.querySelectorAll(e):e instanceof Element||e instanceof NodeList||Array.isArray(e)?e:c(e);return t.length||c(e),a(t)}function $(e){if("function"==typeof e)return void("loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e());return a(["string"==typeof e?document.querySelector(e):e instanceof Element?e:c(e)])}window.$$=$$,window.$=$;const l=new Set,u={};function On(e,t){o({object:t});const n=u[e]||={};for(const o in t)o in n?console.warn(`El selector ${o} ya fue registrado en el evento ${e}`):n[o]=t[o];l.has(e)||(document.body.addEventListener(e,function(e){for(const[t,o]of Object.entries(n)){const n=e.target.closest(t);n&&o.call(n,e)}}),l.add(e))}function Drag(e={}){On("mousedown",function(t){for(const[n,o]of Object.entries(e)){const e=t.target.closest(n);if(e){const n=t.target.closest(o);if(!e||!n)return;let r=t.clientX-n.getBoundingClientRect().left,s=t.clientY-n.getBoundingClientRect().top;n.style.cursor="grabbing",n.classList.toggle("select");const i=t=>{const o=e.getBoundingClientRect(),i=n.getBoundingClientRect();let a=t.clientX-o.left-r,c=t.clientY-o.top-s;const l=Math.max(0,Math.min(a,o.width-i.width)),u=Math.max(0,Math.min(c,o.height-i.height));n.style.transform=`translate(${l}px, ${u}px)`},a=e=>{n.style.cursor="grab",n.classList.toggle("select"),document.body.removeEventListener("mousemove",i),document.body.removeEventListener("mouseup",a)};document.body.addEventListener("mousemove",i),document.body.addEventListener("mouseup",a)}}})}function f(e={},{ext:t=["png","jpg","jpeg"]}={}){const n=t.map(e=>e.toLowerCase());On("dragstart",e=>{e.target}),On("dragover",e=>{e.preventDefault()}),On("dragenter",e=>{console.log("drag enter");e.target&&e.preventDefault()}),On("drop",function(o){o.preventDefault();if([...o.dataTransfer.files].filter(e=>{const t=e.name.split(".").pop().toLowerCase();return!n.includes(t)}).length>0)return console.error(`Extensiones permitidas: --\x3e ${t.join(" ")} <--`);for(const[t,n]of Object.entries(e)){const e=o.target.closest(t);e&&n.call(e,o)}})}window.On=On,window.Drag=Drag,window.Drop=f;const d=Object.freeze({ctrl:"ctrlKey",alt:"altKey",shift:"shiftKey",meta:"metaKey"});function m(e={}){On("keydown",function(t){for(const[n,o]of Object.entries(e)){const e=n.toLowerCase().split("+");if(e.length<2||e.length>4)continue;const r=e.pop(),s=e.every(e=>d[e]&&t[d[e]]),i=t.key.toLowerCase()===r;s&&i&&o.call(t.target,t)}})}window.Shortcut=m;const Click=(e={})=>On("click",e);window.Click=Click;const Input=(e={})=>On("input",e);function h(e){return Object.freeze({status:e.status,statusText:e.statusText,ok:e.ok,timestamp:Date.now(),contentType:e.headers.get("content-type")})}window.Input=Input;const p={GET:()=>({method:"GET",headers:{"Content-Type":"application/json"}}),POST:e=>({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),PUT:e=>({method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),DELETE:e=>({method:"DELETE",headers:{"Content-Type":"application/json"}})};async function g(e,t,n,o){try{const r=await fetch(t,p[e.toUpperCase()](n)),s=r.headers.get("content-type");if(!r.ok)return function(e){Component({template:"/error/404.html",style:"/error/404.css",data:h(e)})}(r);if(!s.includes("application/json"))throw new Error(`Solo acepta JSON. Recibido: ${s}`);const i=await r.json();return o?o(i):i}catch(e){console.log("Error request:",e)}}const y=Object.freeze({get:(e,t)=>g("GET",e,null,t),post:(e,t,n)=>g("POST",e,t,n),put:(e,t,n)=>g("PUT",e,t,n),delete:(e,t)=>g("DELETE",e,null,t)});return window.ajax=y,e.$$=$$,e.Click=Click,e.Component=Component,e.Drag=Drag,e.Drop=f,e.Input=Input,e.On=On,e.Shortcut=m,e.ajax=y,e.default=$,e.validate=o,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
//# sourceMappingURL=$.min.js.map
