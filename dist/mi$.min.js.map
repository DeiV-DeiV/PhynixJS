{"version":3,"file":"mi$.min.js","sources":["../src/ajax.js","../src/effects.js","../src/dom.js","../src/core.js","../src/index.js"],"sourcesContent":["//ajax.js\r\n\r\nexport async function get(template) {\r\n  if (!template || typeof template !== \"string\") {\r\n    console.error(\"❌ mi$.html(): Ruta inválida.\");\r\n    return this;\r\n  }\r\n  try {\r\n    const res = await fetch(`./components${template}.html`);\r\n    if (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n    const html = await res.text();\r\n    this._forEach((el) => (el.innerHTML += html));\r\n  } catch (error) {\r\n    console.error(\"❌ mi$.html(): Falló la carga del componente:\", error);\r\n  }\r\n  return this;\r\n}\r\n\r\nexport async function post(template, body = {}) {\r\n  if (!template || typeof template !== \"string\") {\r\n    console.error(\"❌ mi$.html(): Ruta inválida.\");\r\n    return this;\r\n  }\r\n\r\n  try {\r\n    const opts = Object.freeze({\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(body),\r\n    });\r\n\r\n    const res = await fetch(`./components${template}.html`, opts);\r\n    if (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n    const html = await res.text();\r\n    this._forEach((el) => (el.innerHTML += html));\r\n  } catch (error) {\r\n    console.error(\"❌ mi$.html(): Falló la carga del componente:\", error);\r\n  }\r\n  return this;\r\n}\r\n","// effects.js\r\n\r\nexport function drag() {\r\n  this._forEach((el) => {\r\n    el.style.cursor = \"grab\";\r\n    el.style.position = \"relative\";\r\n    let isDraggable = false;\r\n    let offsetX = 0,\r\n      offsetY = 0;\r\n    let currentX = 0,\r\n      currentY = 0;\r\n\r\n    const UpdatePos = () => {\r\n      el.style.transform = `translate(${currentX}px, ${currentY}px)`;\r\n    };\r\n\r\n    const onMouseDown = function (e) {\r\n      isDraggable = true;\r\n      offsetX = e.clientX - currentX;\r\n      offsetY = e.clientY - currentY;\r\n      el.style.cursor = \"grabbing\";\r\n      e.preventDefault();\r\n    };\r\n    const onMouseMove = function (e) {\r\n      if (!isDraggable) return;\r\n      currentX = e.clientX - offsetX;\r\n      currentY = e.clientY - offsetY;\r\n      UpdatePos();\r\n    };\r\n    const onMouseUp = function () {\r\n      isDraggable = false;\r\n      el.style.cursor = \"grab\";\r\n    };\r\n\r\n    el.addEventListener(\"mousedown\", onMouseDown);\r\n    window.addEventListener(\"mousemove\", onMouseMove);\r\n    window.addEventListener(\"mouseup\", onMouseUp);\r\n  });\r\n  return this;\r\n}\r\n","// dom.js\r\n\r\nimport * as ayax from \"./ajax.js\";\r\nimport * as effects from \"./effects.js\";\r\n\r\nexport const metodos = Object.freeze({\r\n  _forEach(callback) {\r\n    for (let i = 0; i < this.length; i++) {\r\n      callback(this[i], i);\r\n    }\r\n    return this;\r\n  },\r\n\r\n  on(ev, callback) {\r\n    for(let el of this)el.addEventListener(ev, callback)\r\n    return this;\r\n  },\r\n\r\n  off(ev, callback) {\r\n    this._forEach((el) => el.removeEventListener(ev, callback));\r\n    return this;\r\n  },\r\n\r\n  css(style = {}) {\r\n    this._forEach((el) => {\r\n      for (let [prop, val] of Object.entries(style)) {\r\n        \r\n        el.style[prop] = val;\r\n      }\r\n    });\r\n    return this;\r\n  },\r\n\r\n  html(html) {\r\n    this._forEach((el) => (el.innerHTML = html));\r\n    return this;\r\n  },\r\n\r\n  animate(animate) {\r\n    this._forEach((el) => requestAnimationFrame(() => animate(el)));\r\n    return this;\r\n  },\r\n\r\n  addClass(classname) {\r\n    this._forEach((el) => el.classList.add(classname));\r\n    return this;\r\n  },\r\n\r\n  removeClass(classname) {\r\n    for(let el of this) el.classList.remove(classname)\r\n    // this._forEach((el) => el.classList.remove(classname));\r\n    return this;\r\n  },\r\n\r\n  toggleClass(classname) {\r\n    const clase = classname.trim().split(/\\s+/);\r\n    this._forEach((el) => {\r\n      for (let cls of clase) el.classList.toggle(cls);\r\n    });\r\n    return this;\r\n  },\r\n\r\n  ...ayax,\r\n  ...effects,\r\n});\r\n","// core.js\r\n// consume menos memoria, mi punto es ese\r\n\r\nimport { metodos } from \"./dom.js\";\r\n\r\nconst DEBUG = false;\r\nconst x = (...args) => DEBUG && console.log(...args);\r\n\r\nconst DEV_MODO = false; // usar FALSE para produccion\r\n\r\nconst proxyCache = new WeakMap()\r\n\r\nconst getProxy = (el)=>{\r\n  if (!proxyCache.has(el)) {\r\n    const proxy = usarProxyProtegido([el]);\r\n    proxyCache.set(el, proxy);\r\n  }\r\n  return proxyCache.get(el);\r\n}\r\n\r\nconst aplicarMetodos = (nodoArray) => {\r\n  // evita usar proxy\r\n  for (const nameMetodo of Object.keys(metodos)) {\r\n    Object.defineProperty(nodoArray, nameMetodo, {\r\n      value: metodos[nameMetodo],\r\n      writable: false,\r\n      configurable: false,\r\n      enumerable: false,\r\n    });\r\n  }\r\n\r\n  // Previene agregar nuevas propiedades\r\n  return nodoArray\r\n  // return Object.freeze(nodoArray);\r\n  // Object.freeze(Persona.prototype);\r\n};\r\n\r\nconst usarProxyProtegido = (nodoArray) => {\r\n  return new Proxy(nodoArray, {\r\n    get(target, prop) {\r\n      if (prop in target) return target[prop];\r\n      if (prop in metodos) {\r\n        const fn = metodos[prop];\r\n        Object.defineProperty(target, prop, {\r\n          value: fn,\r\n          writable: false,\r\n          configurable: false,\r\n          enumerable: false,\r\n        });\r\n\r\n        return fn;\r\n      }\r\n\r\n      return undefined;\r\n    },\r\n\r\n    set(target, prop, value) {\r\n      if (prop in metodos)\r\n        throw new Error(`No puedes sobreescribir el metodo ${prop}`);\r\n      target[prop] = value;\r\n      return true;\r\n    },\r\n  });\r\n};\r\n\r\nexport const mi$ = (selector) => {\r\n  if (typeof selector === \"function\") {\r\n    document.addEventListener(\"DOMContentLoaded\", selector);\r\n    return;\r\n  }\r\n\r\n  if (typeof selector === \"string\") {\r\n    const elements = Array.from(document.querySelectorAll(selector));\r\n    \r\n\r\n    \r\n    return DEV_MODO\r\n      ? usarProxyProtegido(elements)\r\n      : aplicarMetodos(elements);\r\n  }\r\n\r\n  return [];\r\n};\r\n","// index.js\r\nimport { mi$ } from \"./core.js\";\r\n\r\nexport const $ = (selector) => mi$(selector);\r\nwindow.$ = (selector) => mi$(selector)\r\n"],"names":["async","template","console","error","this","res","fetch","ok","Error","status","html","text","_forEach","el","innerHTML","body","opts","Object","freeze","method","headers","JSON","stringify","style","cursor","position","isDraggable","offsetX","offsetY","currentX","currentY","addEventListener","e","clientX","clientY","preventDefault","window","transform","metodos","callback","i","length","on","ev","off","removeEventListener","css","prop","val","entries","animate","requestAnimationFrame","addClass","classname","classList","add","removeClass","remove","toggleClass","clase","trim","split","cls","toggle","ayax","effects","mi$","selector","nodoArray","nameMetodo","keys","defineProperty","value","writable","configurable","enumerable","aplicarMetodos","Array","from","document","querySelectorAll","$"],"mappings":"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"}